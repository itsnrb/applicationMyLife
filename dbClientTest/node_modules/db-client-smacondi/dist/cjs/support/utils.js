"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getMongoDbObjectId = getMongoDbObjectId;
var _mongodb = require("mongodb");
// @ts-check

// https://stackoverflow.com/questions/11985228/mongodb-node-check-if-objectid-is-valid
// e. g. ObjectId.isValid('accountadmin') is true
const mongoIdRegExp = new RegExp('^[0-9a-fA-F]{24}$');

/**
 * Returns a mongo db object id or throws an error if the value cannot be converted into a mongo object id
 * @param {any} value value to convert
 */
function getMongoDbObjectId(value) {
  if (!isMongoDbObjectId(value)) {
    throw new Error(`${value} is not a valid Mongo ObjectId`);
  }
  return new _mongodb.ObjectId(value);
}
;
function isMongoDbObjectId(value) {
  if (!value) {
    return false;
  }
  if (value instanceof _mongodb.ObjectId) {
    return true;
  }
  if (typeof value !== 'string') {
    return false;
  }
  return mongoIdRegExp.test(value);
}